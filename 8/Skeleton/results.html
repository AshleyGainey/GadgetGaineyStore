<!DOCTYPE html>
<html>

<head>
    <!-- This is a comment tag -->

    <!-- All meta data for SEO-->
    <meta charset="UTF-8"/>
    <meta name="author" content="Ashley Gainey">
    <meta name="description"
          content="Looking for the best kids products with a great price? Browse our amazing collection and get the perfect gift">
    <meta property="og:title" content="Gadget Gainey Store - Home of the best kids products!">
    <meta name="keywords" content="toys, kids, children, store, go kart, playsets, play, presents, fun, little kids, pedal, pedal go karts, pedal go kart,
		car, ride on, ride on bike, ride on cars, cars, bike, outdoor, racing">
    <link rel="icon" href="Images/OnEveryPage/Gadget Gainey icon.png">

    <Title>Gadget Gainey Store</Title>
    <link rel="stylesheet" href="siteLayout.css" type="text/css" media="screen,projection"/>
    <link rel="stylesheet" href="siteTheme.css" type="text/css" media="screen,projection"/>

    <!-- <base href="/images/" target = "_blank"> -->
    <style>


        #tableFormat {
            width: 100%;
            text-align: center;
        }

        td {
            padding: 10px;
        }


        #searchedFor {
            width: 100%;
            text-align: center;
            padding: 20px;

        }


        #Main_Body td a {
            color: #000000;
        }

        tr {
            cursor: pointer;
        }


        .div-to-display {
            display: none;
            position: absolute;
            top: 50%;
            left: -425px;
            float: left;
            z-index: 10;

        }

        .div-to-display img {
            width: 400px;
            float: left;

        }

        td {
            position: relative;
        }

        td:hover > .div-to-display {
            display: block;
        }
    </style>
    <script src="jquery-3.3.1.min.js"></script>
    <script src='Shop.js'></script>
    <script>
        var timer;

        // Your global variables should be declared below here -v


        // Your global variables should be declared above here -^
        // Any user defined functions should be declared below here -v


        // Any user defined functions should be declared above here -^

        $(document).ready(function () {

            // set a timed function call to wait for product xml to load
            timer = window.setInterval(function () {


                var removePlus = vars['searchTerm'];
                removePlus = removePlus.replace(/\+/g, ' ');
                document.title = "Results for " + removePlus + " - Gadget Gainey Store";
                $("#searchedFor").text("You've searched for: " + removePlus);

                // Check if products have loaded
                if (($products === null) || ($sResults === null)) {
                    // They haven't loaded
                    return;

                } else {
                    // They have loaded

                    // Remove timer
                    window.clearInterval(timer);

                    // Populate the nav bar
                    populateNav("navmenu");


                    // Your $(document).ready() event script code goes below here -v
                    // Add the search term back into the search bar
                    $("#searchTerm").attr("value", vars['searchTerm']);

                    if ($sResults.find("product").length > 0) {

                    } else {
                        // We don't have any results
                        // Hide the table
                        $("#tableFormat").hide();
                        $("#Main_Body").append("<h1>There are no search results. </h1>");
                        return;
                    }


                    $sResults.find('product').each(function () {

                        var $product = $(this);

                        id = $product.find('id').text();
                        var title = $product.find('title').text();
                        var brand = $product.find('brand').text();
                        var price = $product.find('price').text();


                        $('tbody').append("<tr>"
                            + "<td>" + "<a href=" + "'product.html?id=" + id + "&searchTerm=" + vars['searchTerm'] + "'" + "</a>" + id + "</td>"
                            + "<td>" + "<a href=" + "'product.html?id=" + id + "&searchTerm=" + vars['searchTerm'] + "'" + "</a>" + title + "</td>"
                            + "<td>" + "<a href=" + "'product.html?id=" + id + "&searchTerm=" + vars['searchTerm'] + "'" + "</a>" + brand + "</td>"
                            + "<td>" + "<a href=" + "'product.html?id=" + id + "&searchTerm=" + vars['searchTerm'] + "'" + "</a>" + "£" + price + "</td>"
                            + "</tr>");


                        //I have built up the URL for the product 'link' which retains the original search terms

                        //The below are css attributes assigned when hovering over an element

                        $('tbody tr').mouseenter(function () {
                            $(this).css("background-color", "#6185C7");

                        })

                        $('tbody tr').mouseleave(function () {
                            $(this).css("background-color", "");

                        })


                        //The below code sorts data into alphabetical or ascending (numeric values) order depending on the selected column header which has been clicked

                        var thIndex = 0,
                            curThIndex = null;

                        $(function () {
                            $('table thead tr th').click(function () {
                                thIndex = $(this).index();
                                if (thIndex != curThIndex) {
                                    curThIndex = thIndex;
                                    sorting = [];
                                    tbodyHtml = null;
                                    $('table tbody tr').each(function () {
                                        sorting.push($(this).children('td').eq(curThIndex).html() + ', ' + $(this).index());
                                    });

                                    sorting = sorting.sort();
                                    sortIt();
                                }
                            });
                        });
                        $('td').hover(function () {
                                // Get the first td
                                var idOfRow = $(this).closest('tr').children('td:eq(0)').text();

                                $('.ToDisplay').attr('src', "/Images/ProductImages/" + idOfRow + ".png");

                            },
                            function () {
                                $("td").removeClass('ToDisplay');
                            });


                    });

                    $('td:nth-child(1)').hide();

                    $('td').append('<div class="div-to-display"><img class="ToDisplay" + src=""</div>');

                    function sortIt() {
                        for (var sortingIndex = 0; sortingIndex < sorting.length; sortingIndex++) {
                            rowId = parseInt(sorting[sortingIndex].split(', ')[1]);
                            tbodyHtml = tbodyHtml + $('table tbody tr').eq(rowId)[0].outerHTML;
                        }
                        $('table tbody').html(tbodyHtml);
                    }

                    // Your $(document).ready() event script code goes above here -^
                }
            }, 100);

            // Your $(document).ready() event script code goes below here -v


            // Your $(document).ready() event script code goes above here -^
        });
    </script>
</head>

<body>
<div class="container">
    <div id="Header">
        <div class="Trust-Header">
            <div id="Trust-eBay">
                <a href="https://bit.ly/2to8o1z" target="_blank">
                    <h3> 98% OF CUSTOMERS LOVE US ON</h3>
                    <img src="Images/OnEveryPage/Trust Banner/eBay logo.png" alt="eBay">
                </a>
            </div>
            <div id="Trust-Fast_Delivery">
                <a href="Delivery.html"> <img src="Images/OnEveryPage/Trust Banner/Next Day Delivery.png"
                                              alt="Next Day Delivery">
                    <h3> ORDER BY 3PM FOR NEXT DAY FREE DELIVERY</h3>
                </a>
            </div>
            <div id="Trust-Free_Delivery">
                <a href="Returns.html"> <img src="Images/OnEveryPage/Trust Banner/Returns.png"
                                             alt="Returns">
                    <h3>FREE 28 DAY RETURN ON EVERYTHING</h3>
                </a>
            </div>
        </div>
        <div class="line">
            <hr/>
        </div>
        <div id="Main-Header">
            <div id="Logo"><a href="index.html"> <img
                    src="Images/OnEveryPage/Main Banner/Gadget Gainey White Small Logo.png" alt="Logo"> </a>
            </div>

            <form method="get" action="results.html">
                <div class="fullSearchBox">
                    <input class="searchBox" type="search" name="searchTerm" autocomplete="off"
                           placeholder="Search Gadget Gainey..."/>
                    <button class="searchButton"><img
                            src="Images/OnEveryPage/Main Banner/Magnifier Glass - Search.png" alt="Search">
                    </button>
                </div>
            </form>


            <div class="RightButtons">
                <div id="Help"><a href="404Error.html"> <img src="Images/OnEveryPage/Main Banner/Help.png" alt="Help">
                    <h3>Help</h3>
                </a>
                </div>
                <div id="Basket"><a href="404Error.html"> <img src="Images/OnEveryPage/Main Banner/Basket.png"
                                                                   alt="Basket">
                    <h3>Basket</h3>
                </a>
                </div>
            </div>
        </div>
    </div>


    <ul class="navmenu">
    </ul>
    <div id=Outside_Body>
        <div class="div-to-display"><img src="Images\Home\Loading.png"/></div>

        <h2 id="searchedFor"></h2>
        <div id=Main_Body>
            <table id="tableFormat">
                <colgroup>
                    <col id="col1">
                    <col id="col2">
                    <col id="col3">
                    <col id="col4">
                </colgroup>
                <thead>
                <tr>
                    <th>Title</th>
                    <th>Brand</th>
                    <th>Price</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                </tr>
                </tbody>
            </table>
        </div>


        <footer>
            <div id="Footer-GadgetGainey" class="footerTextSection">
                <a href="index.html">
                    <h1>Gadget Gainey</h1>
                </a>
                <a href="About.html">
                    <h4>About Us</h4>
                </a>
                <a href="404Error.html">
                    <h4>Basket</h4>
                </a>
                <a href="https://bit.ly/2BLLE05" target="_blank">
                    <h4>eBay Store</h4>
                </a>
                <a href="404Error.html">
                    <h4>Sitemap</h4>
                </a>
            </div>
            <div id="Footer-TheBoringStuff" class="footerTextSection">
                <h2>The Boring Stuff</h2>
                <a href="Delivery.html">
                    <h4>Shipping & Delivery</h4>
                </a>
                <a href="Returns.html">
                    <h4>Returns & Refunds</h4>
                </a>
                <a href="TermsConditions.html">
                    <h4>Terms & Conditions</h4>
                </a>
            </div>
            <div id="Footer-Support" class="footerTextSection">
                <h2>Support</h2>
                <a href="404Error.html">
                    <h4>Contact Us</h4>
                </a>
                <a href="404Error.html">
                    <h4>FAQ's</h4>
                </a>
            </div>
            <div id="Footer-Supported_Payments" class="footerTextSection">
                <h2>Supported Payments </h2>
                <img src="Images/OnEveryPage/Payment Types.png" alt="Mastercard, Maestro, American Express, Visa and PayPal">
            </div>
            <div id="Footer-Find-eBay">
                <h2>Find us on</h2>
                <a href="https://bit.ly/2BLLE05" target="_blank">
                    <img src="Images/OnEveryPage/Trust Banner/eBay logo.png" alt="eBay">
                </a>
            </div>
            <div id="Footer-copyright" class="footerTextSection">
                <h5>
                    © Gadget Gainey 2019. All Rights Reserved
                </h5>
            </div>
        </footer>
    </div>
</div>
</body>
</html>