<?php
// ******************************************************
// ** YOU ARE TO ADD YOU PRODUCT DATA INTO THIS ARRAY  **
// ******************************************************

	$productArray = array(
"<product top-level-category=\"Ride On Toys\" sub-level-category=\"Battery Powered Cars\"><id>0001</id><title>Licensed Ford Focus RS 12V Children’s Battery Ride On Car - Black</title><brand>Ford</brand><price>217.93</price><description>If you’re looking for a ride-on with sleek racing lines that will turn heads look no further than this, the all new Licensed Ford Focus RS 12V Ride-on. This child sized Hot Hatch has been inspired by Fords performance sports car and comes with a host of extra’s to add to the driving experience and realism such as LED Lights, Key start and MP3 connectivity. Any child is going to have a massive smile on their face as soon as they get behind the wheel of their very own Ford Focus RS, so get ready to race!</description><picture>0001.png</picture><eBayLink>292990669558</eBayLink></product>\n",
"<product top-level-category=\"Ride On Toys\" sub-level-category=\"Battery Powered Cars\"><id>0002</id><title>Maserati style 12v Ride-on Children’s Electric car - Black</title><brand>Maserati</brand><price>147.98</price><description>Small and mighty and loads of fun this new 12v ride-on looks amazing and has all the extra’s you’d expect from a much more expensive model. This brilliant twin motor 12v ride-on’s eye catching design even includes fun butterfly doors as well as parental remote control.</description><picture>0002.png</picture><eBayLink>292990887892</eBayLink></product>\n",
"<product top-level-category=\"Ride On Toys\" sub-level-category=\"Battery Powered Cars\"><id>0003</id><title>12V Battery Operated Ride On Digger with 360 Degree Spin &amp; Working Bucket</title><brand>Outdoor Toys</brand><price>178.59</price><description>Got a big job? Need to bring in the heavy machinery? Aged 3 – 7 years? Well if you’ve answered yes to the last one (the first two questions sound too much like work!) you’ll be as excited about our newest ride-on as we are because this 12V digger is almost too much fun! This 12V Ride On digger with 360 degree turn and working bucket is controlled by easy to use joysticks. Push them both forward, and go forward, pull them both back to go into reverse and if you push them in opposite directions, well we suggest you keep an eye on that bucket because that’s how you spin and you’re not going to want to stop! Filled with great extra’s this digger also has a working bucket with a separate joystick control to operate it. But don’t worry when you get tired of working there’s a parental remote control and even a telescopic push handle so you can just sit back and let someone else take the strain at the end of a busy work day.</description><picture>0003.png</picture><eBayLink>292990887884</eBayLink></product>\n",
"<product top-level-category=\"Ride On Toys\" sub-level-category=\"Pedal Cars\"><id>0004</id><title>BERG Buddy Go-kart - Fendt - Green</title><brand>BERG</brand><price>299.93</price><description>Roll up your sleeves and get going! Enjoy playing outdoors in your BERG Buddy Fendt go-kart. All Buddy go-karts have a unique BFR system, which means you can pedal forwards, brake and, after standing still, pedal backwards without changing gear.</description><picture>0004.png</picture><eBayLink>292990887889</eBayLink></product>\n",
"<product top-level-category=\"Ride On Toys\" sub-level-category=\"Pedal Cars\"><id>0005</id><title>BERG Buddy Go-kart - John Deere - Yellow</title><brand>BERG</brand><price>298.98</price><description>The BERG Buddy John Deere go-karts look so much like the ‘real’ tractors, that you have to watch out the police don’t ask to see your driving licence. Great for children from the age of three, but the adjustable seat means you can enjoy playtime pleasure for years. The unique BFR system ensures that you can pedal, brake and ride backwards using the pedals.</description><picture>0005.png</picture><eBayLink>292990887887</eBayLink></product>\n",
"<product top-level-category=\"Ride On Toys\" sub-level-category=\"Pedal Cars\"><id>0006</id><title>BERG Choppy Go-kart</title><brand>BERG</brand><price>245.92</price><description>Are you looking for a really awesome go-kart? Then check out the BERG Choppy! This go-kart has special metallic paint and an impressive front fork in black. The specially designed stickers make this go-kart entirely unique. Thanks to the BFR hub the BERG Choppy is safe to use and allows you to pedal forwards and backwards and instantly brake without having to take your hands off the steering wheel.</description><picture>0006.png</picture><eBayLink>292990887871</eBayLink></product>\n",
"<product top-level-category=\"Ride On Toys\" sub-level-category=\"Pedal Cars\"><id>0007</id><title>BERG Buddy Go-kart - Pink</title><brand>BERG</brand><price>269.99</price><description>With the BERG Buddy White go-kart playing outdoors is even nicer! For years you’ll have the greatest adventures on this go-kart, because the seat and the steering are adjustable. The unique BFR system ensures that you can pedal, brake and ride backwards using the pedals.</description><picture>0007.png</picture><eBayLink>292990887875</eBayLink></product>\n",
"<product top-level-category=\"Ride On Toys\" sub-level-category=\"Bikes\"><id>0008</id><title>Renegade 50R 500W 36V Electric Mini Dirt Bike - Green</title><brand>Renegade</brand><price>430.78</price><description>The second new dirt bike from Renegade is the Renegade 50R 500W 36V Electric Mini Dirt Bike, this is the 500W, 36-volt version of the 50R Dirt Bike and has a spec list to make you drool. The 50R Electric Dirt Bikes’ 36V Rare Earth - Neodymium Magnet Motor is compact yet powerful, producing 500W of almost instant power quietly and efficiently, coupled with the 36V9Ah lead acid battery you get a run time of 45 - 60 minute per full charge and a top speed of 25kmh (15mph). Suitable for beginners to experiences riders this great new Mini Dirt bike has a Parental speed control (adjustable by the supplied key) as well as front and rear disc breaks for safety. This product Requires Assembly</description><picture>0008.png</picture>><eBayLink>292990887897</eBayLink></product>\n",
"<product top-level-category=\"Ride On Toys\" sub-level-category=\"Bikes\"><id>0009</id><title>Renegade MK250 Kids 24V Electric Dirt Bike - Blue</title><brand>Renegade</brand><price>246.87</price><description>The MK250 24V Electric Motorbike is a rechargeable bike designed specifically for kids and has a top speed of 21km/h! But don’t worry if they want to get used to things before taking it up to full speed there is also a low speed setting with a max of 11km/h and balance wheels fitted for learner drivers. The MK250 is designed so that first time riders can learn at their own pace, allowing them to gain confidence until their ready to ditch the training wheels and take it up to full speed. This chain driven 24V motorbike lasts around 45 - 60 minutes on a full charge and with the strong steel frame it is even capable of a little off roading.</description><picture>0009.png</picture><eBayLink>292990887874</eBayLink></product>\n",
"<product top-level-category=\"Radio Controlled Toys\" sub-level-category=\"Cars\"><id>0010</id><title>1:16 Mario Race Kart</title><brand>Nintendo</brand><price>97.83</price><description>Mario begins the new racing season with this improved race kart. The brave plumber has received a speed upgrade, and you can tell: his kart provides authentic racing sounds and an impressive, stylish new design.</description><picture>0010.png</picture><eBayLink>292990887882</eBayLink></product>\n",
"<product top-level-category=\"Radio Controlled Toys\" sub-level-category=\"Cars\"><id>0011</id><title>FTX Vantage 1/10 4WD Brushed Buggy 2.4GHz</title><brand>FTX</brand><price>147.89</price><description>Race inspired styling at an entry level price. The FTX Vantage Brushed Edition comes with everything you need to be up and running all in the box (just add AA’s). For those with a limited budget the Vantage Brushed represents fantastic value and includes a Voltz 1800mah NiMh battery and charger, factory fitted electronic speed control, power 550 motor and 2.4GHz 2-channel radio system. The 4wd shaft drivetrain features metal diff gears and front universal driveshafts, while an integrated slipper helps protect the drive from possible damage. With adjustable turnbuckles all round and large bore oil filled shock absorbers the Vantage Brushed is raring to go at a truly amazing price. In addition if you want to tune and upgrade your Vantage Brushed, FTX provide a wide range of carbon and aluminium upgrades that will bring your ride up to a whole new pro level.</description><picture>0011.png</picture><eBayLink>292990887877</eBayLink></product>\n",
"<product top-level-category=\"Radio Controlled Toys\" sub-level-category=\"Drones\"><id>0012</id><title>Hubsan Zino Folding Drone 4K FPV, 5.8G</title><brand>Hubsan</brand><price>448.95</price><description>H117S Zino is a new high-quality model from an affordable price segment from Hubsan. The Quadrocopter has a folding design that makes it convenient and compact for storage and transportation. A camera with 4K UHD Ultra High Definition 3840X2160 30FPS Ambarella Sports Image Processor on a 3-axis gyroscopic suspension allows you to achieve a smooth and clear picture, and the range is now as much as 2.5 km!</description><picture>0012.png</picture><eBayLink>292990887878</eBayLink></product>\n",
"<product top-level-category=\"Radio Controlled Toys\" sub-level-category=\"Drones\"><id>0013</id><title>Hubsan 501S x4 Black FPV Quadcopter Drone with GPS</title><brand>Hubsan</brand><price>318.98</price><description>The H501S is the latest FPV Quadcopter from Hubsan and features a built-in 1080P HD Camera, return to home mode, built in GPS,altitude adjust and superior brushless motors for increased flight time and a headless flight mode to make the quad even easier to fly. The built-in GPS* enables the quadcopter to enter into failsafe mode if the connection to the radio transmitter is lost. In failsafe mode the flight control system will automatically control the quadcopter and return to the home-point and land safely; you can also manually switch the Quad to fail-safe mode directly from the return to home function switch on the transmitter. The built-in GPS is also utilized for the Follow me mode which enables the quad to follow and record your activities. The multi-function transmitter features a built-in 4.3 inch FPV LCD screen displaying clear 5.8Ghz real-time video transmission from the Quads on-board 1080P HD camera. It has conveniently placed switches and buttons on the front face of the transmitter for GPS, RTH and camera/video functions make this quad a pleasure to use. With a stylish and sleek new body shape, LED’s lighting up the feet the H501S is the ideal entry to a more rewarding FPV and Ariel camera footage experience. What sets the H501S apart from its rivals is its impressive array of features. The 1080P HD camera allows for some stunning aerial photography and videos coupled with the high capacity battery and altitude height adjust it can give flight times of 20-25 minutes</description><picture>0013.png</picture><eBayLink>292990887885</eBayLink></product>\n",
"<product top-level-category=\"Role Play Playsets\" sub-level-category=\"Cooking Playsets\"><id>0014</id><title>Smoby Star Giant Black &amp; Decker Workbench</title><brand>Smoby</brand><price>98.96</price><description>This Giant Black and Decker play workbench is 103cm in height and comes equipped with 92 accessories, including 7 tools, 20 screws, 18 nuts, 6 nails, construction planks, a mechanical ruler and more. Young builders can use all the tools at their disposal, including the mechanical drill, to assemble the free-wheeling buildable car: building enthusiasts can download the Smoby app on App Store or Google Play to learn about all the different tools and how to use them.</description><picture>0014.png</picture><eBayLink>292990887880</eBayLink></product>\n",
"<product top-level-category=\"Role Play Playsets\" sub-level-category=\"Cooking Playsets\"><id>0015</id><title>Chad Valley Deluxe Studio Kitchen</title><brand>Chad Valley</brand><price>102.29</price><description>This large play-kitchen from Chad Valley features a hotplate, oven, dishwasher, sink, fridge, espresso machine, soda machine and large countertop. It also comes with 32 accessories: 2 forks, knives, spoons, plates, glasses and cups; 6 coffee capsules, 1 soda can, a frying pan, a plastic pancake, a pasta pan, a salt and pepper shaker, 4 food cartons, a dish rack, and a plastic fish fillet and steak.</description><picture>0015.png</picture><eBayLink>292990887883</eBayLink></product>\n",
"<product top-level-category=\"Role Play Playsets\" sub-level-category=\"Cooking Playsets\"><id>0016</id><title>Little Tikes Cook 'N' Store Kitchen - Red</title><brand>Little Tikes</brand><price>108.93</price><description>The red Little Tikes Cook 'n Store Kitchen comes fully assembled. Plus, this play kitchen set compactly folds up for easy storage! This unique, red play kitchen has plenty of storage for all of the 34 accessories. Examples of the kitchen accessories include utensils, pots, food, and more! Little hands were meant to cook up new creations with their imagination – the red Cook 'n Store Kitchen will allow them to do just that! Comes with 32 accessories, including plates, cups, silverware, pans, cooking utensils, and play goods and spices. Includes oven and stove top with clicking knobs includes spinning shelves for storage. Comes fully assembled compactly folds up for easy storage room to store all accessories while folded up.</description><picture>0016.png</picture><eBayLink>292990887886</eBayLink></product>\n",
"<product top-level-category=\"Role Play Playsets\" sub-level-category=\"Cooking Playsets\"><id>0017</id><title>Smoby Tefal French Touch Kitchen</title><brand>Smoby</brand><price>140.54</price><description>The Tefal French Touch Kitchen by Smoby includes a stove with two hotplates, grill, removable sink, extractor hood, clock, oven, coffee machine and 45 cooking, dining and play food accessories. The refrigerator even has an ice machine dispensing ice cubes at the push of a button! The kitchen has enough features to keep kids busy for hours with realistic cooking sounds from the hob and a pancake flipping frying pan. Realistic cooking sounds. Comes with 45 accessories including plates, cutlery, cooking pans, kitchen utensils and play food. Loads of features including a coffee machine, pancake flipper and 'magic pasta' saucepan! Press the button on the ice machine to dispense play ice-cubes! Food has 'cooked' and 'raw' sides so kids can flip it over when they have finished cooking.</description><picture>0017.png</picture><eBayLink>292990944330</eBayLink></product>\n",
"<product top-level-category=\"Role Play Playsets\" sub-level-category=\"Shopping Playsets\"><id>0018</id><title>COSTWAY Wooden Toy Shop</title><brand>COSTWAY</brand><price>97.78</price><description>Wooden toy shop is a original shop to keep the little shop owner busy and have hours of fun. The unit is divided into sections with enough space to store many items and comes with blackboard. This toy market encourages hand eye co-ordination, imaginative skills and operational ability. Looking forward to the arrival of you and your children!</description><picture>0018.png</picture><eBayLink>292990944339</eBayLink></product>\n",
"<product top-level-category=\"Role Play Playsets\" sub-level-category=\"Shopping Playsets\"><id>0019</id><title>Smoby Pretend Supermarket</title><brand>Smoby</brand><price>99.67</price><description>Market with several play zones: checkout, fruits and vegetables area, small sections, including weighing. 42 accessories are included: scale, trolley, clock, cash register with electronic functions (it has 1 money drawer, 1-real calculator with a LCD screen, 1 microphone, 1 credit card reader, 1 bar code scanner with sound and light), dummy boxes, vegetables, fruits, for 3 year old and older.</description><picture>0019.png</picture><eBayLink>292990944361</eBayLink></product>\n",
"<product top-level-category=\"Role Play Playsets\" sub-level-category=\"Shopping Playsets\"><id>0020</id><title>Bee Smart Wooden Toy Shop</title><brand>Bee Smart</brand><price>68.00</price><description>Bee Smart's UNIQUE WOODEN TOY SHOP for pretend play for toddlers. 26 pieces include a range of wooden toy food play items. Pretend food PIECES EASILY STORE INSIDE the Play Shop. Perfect Wooden Food Toy for children. CARRY HANDLE FOR PORTABILITY. Includes 26 Pieces! Explores role play and imagination whilst setting up toy shop to play! Enhances hand and eye co-ordination and fine motor skills. Children will enjoy discovering new ways to play and learn for hours! HOURS OF FUN setting up pretend shop to play while developing fine motor skills and stimulating imagination. This bright and colourful play supermarket appeals to both girls and boys CHALKBOARD FRONT PANEL ALLOWS PERSONALISATION for open and closing times, daily special offers or even personalise shop name! This Play Toy Shop for kids is great for exploring role play and imagination. Stimulate little minds by helping children to understand the concept of 'selling' and 'buying' food and drinks. A great addition to encourage role play with this pretend Toy Shop and compliments other wooden toy foods. Toy Shop Accessories included. Play Supermarket has 26 pieces including wooden play food for children: Water Bottle, Rainbow Sprinkles, Chocolate Spread, Strawberry Jam, Ice Cream Cones, Ice Cream Sundaes, Bread Rolls, Sliced Bread, Biscuit and Cookie Selection and Chalk. Suitable for 36 Months +. Especially designed to work well with little hands. The kids play food items are perfectly sized for little hands. Bon appétit! The play food set has high quality wood and painting detail. Hand crafted and painted wooden pieces with wooden storage box.</description><picture>0020.png</picture><eBayLink>292990944361</eBayLink></product>\n"
);




// *******************************************************************
// ** YOU MUST NOT CHANGE ANY OF THE CODE BELOW THIS COMMENT 		**
// ** IN THIS FILE UNLESS AUTHORISED TO DO SO BY THE MODULE LEADER  **
// *******************************************************************

	echo "<?xml version=\"1.0\"?>\n";
	
	// Check to see what we are sending
	if (empty($_GET))
	{
		// Send all products
		echo "<products>";
		for($x = 0; $x < 20; $x++)
		{
			echo $productArray[$x];
		}
		echo "</products>";
	}
	else if(array_key_exists('homepage', $_GET))
	{
		// The index.html is asking for carousel products
		echo "<homepageProducts>";
		
		$prodChosen = [];
		
		for ($i = 0; $i < 6; $i=$i+1)
		{
			echo "<prodID>00";
			
			// Generate product id
			$val = rand(1, 20);
			
			if ($i > 0)
			{
				$chosen = 0;
				
				// Check it has not already been chosen
				while ($chosen == 0)
				{
					for ($v=0; $v < $i; $v++)
					{
						if ($prodChosen[$v] == $val)
						{
							$chosen = 1;
						}
					}
					
					if ($chosen == 1)
					{
						$val = rand(1, 20);
						$chosen = 0;
					}
					else
					{
						$chosen = 1;
					}
				}
			}
			
			// Debug line
			// error_log($val, 4);
			
			$prodChosen[$i] = $val;
			
			if ($val < 10)
			{
				echo "0", $val;
			}
			else
			{
				echo $val;
			}
			
			echo "</prodID>";
		}
		
		echo "</homepageProducts>";
	}
	else
	{
		// Must be a search
		echo "<results>";
		$engine[20][2];
		
		for ($x=0; $x < 20; $x++)
		{
			$engine[$x][0] = $x;
			$engine[$x][1] = 0;
		}
		
		// Only add products if there is an actual term
		if (array_key_exists('searchTerm', $_GET))
		{
			if (strlen($_GET['searchTerm']) > 0)
			{
				$bits = explode(" ", $_GET['searchTerm']);
				if (count($bits) == 1)
				{
					//Only one term - check each product
					for ($x=0; $x < 20; $x++)
					{
						$engine[$x][1] = substr_count(strtolower($productArray[$x]), strtolower($_GET['searchTerm']));
					}
				}
				else
				{
					//Multiple terms
					// Check whole string of terms against the products
					for ($x=0; $x < 20; $x++)
					{
						$engine[$x][1] = substr_count(strtolower($productArray[$x]), strtolower($_GET['searchTerm']));
					}
					
					// Check each individual term against the products
					for ($x=0; $x < 20; $x++)
					{
						for ($y=0; $y < count($bits); $y++)
						{
							$engine[$x][1] += substr_count(strtolower($productArray[$x]), strtolower($bits[$y]));
						}
					}
				}
				
				// Now sort them into count order
				for ($x=0; $x < 19; $x++)
				{
					for ($y=$x + 1; $y < 20; $y++)
					{
						if ($engine[$x][1] < $engine[$y][1])
						{
							// Swap them
							$tmp = $engine[$x];
							$engine[$x] = $engine[$y];
							$engine[$y] = $tmp;
						}
					}
				}
				
				// Only output the products with a count > 0
				for ($x=0; $x < 20; $x++)
				{
					if ($engine[$x][1] > 0)
					{
						echo $productArray[$engine[$x][0]];
					}
				}
				
			}
		}
		
		echo "</results>";
	}
?>